From 20aba246dab235bc2e4be8ad3cb3ef08376aa998 Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Sun, 8 Dec 2019 00:28:14 +0200
Subject: [PATCH 2/5] rw-system: allow dt2w on some xiaomi devices

	modified:   rw-system.sh
---
 rw-system.sh | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/rw-system.sh b/rw-system.sh
index bfa1416..c72245f 100644
--- a/rw-system.sh
+++ b/rw-system.sh
@@ -504,6 +504,15 @@ for ev in $(cd /sys/class/input;echo event*);do
 	fi
 done
 
+# allow dt2w on some xiaomi devices
+if [ -f "/proc/touchpanel/wakeup_gesture" ]; then
+  chown root:system /proc/touchpanel/wakeup_gesture
+  chmod 664 /proc/touchpanel/wakeup_gesture
+elif [ -f "/proc/tp_wakeup_gesture" ]; then
+  chown root:system /proc/tp_wakeup_gesture
+  chmod 664 /proc/tp_wakeup_gesture
+fi
+
 has_hostapd=false
 for i in odm oem vendor product;do
     if grep -qF android.hardware.wifi.hostapd /$i/etc/vintf/manifest.xml;then
-- 
2.11.0

