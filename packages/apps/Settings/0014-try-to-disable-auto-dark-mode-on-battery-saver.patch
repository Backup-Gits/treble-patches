From f6910b517cb702463f2cc6704b2665c0a16e9f61 Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Mon, 2 Mar 2020 13:42:28 +0200
Subject: [PATCH] try to disable auto dark mode on battery saver

	modified:   src/com/android/settings/display/DarkUIPreferenceController.java
---
 .../display/DarkUIPreferenceController.java      | 16 +---------------
 1 file changed, 1 insertion(+), 15 deletions(-)

diff --git a/src/com/android/settings/display/DarkUIPreferenceController.java b/src/com/android/settings/display/DarkUIPreferenceController.java
index d3d30b5..9eb778f 100644
--- a/src/com/android/settings/display/DarkUIPreferenceController.java
+++ b/src/com/android/settings/display/DarkUIPreferenceController.java
@@ -110,24 +110,10 @@ public class DarkUIPreferenceController extends TogglePreferenceController imple
         if (mPreference == null) {
             return;
         }
-        boolean isBatterySaver = isPowerSaveMode();
-        mPreference.setEnabled(!isBatterySaver);
-        if (isBatterySaver) {
-            int stringId = mUiModeManager.getNightMode() == UiModeManager.MODE_NIGHT_YES
-                    ? R.string.dark_ui_mode_disabled_summary_dark_theme_on
-                    : R.string.dark_ui_mode_disabled_summary_dark_theme_off;
-            mPreference.setSummary(mContext.getString(stringId));
-        } else {
-            mPreference.setSummary(null);
-        }
-    }
 
-    @VisibleForTesting
-    boolean isPowerSaveMode() {
-        return mPowerManager.isPowerSaveMode();
+        mPreference.setSummary(null);
     }
 
-
     @VisibleForTesting
     void setUiModeManager(UiModeManager uiModeManager) {
         mUiModeManager = uiModeManager;
-- 
2.17.1

