From d2148e8616d475fc7d0fdc14945fa1dd3813a772 Mon Sep 17 00:00:00 2001
From: Pranav Vashi <neobuddy89@gmail.com>
Date: Sun, 29 Mar 2020 23:00:26 +0530
Subject: [PATCH 07/10] Disable Quick Settings on secure lockscreen (2/2)

Signed-off-by: Pranav Vashi <neobuddy89@gmail.com>
---
 res/values/cr_strings.xml                          | 4 ++--
 res/xml/crdroid_settings_lockscreen.xml            | 4 ++--
 src/com/crdroid/settings/fragments/LockScreen.java | 2 ++
 3 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/res/values/cr_strings.xml b/res/values/cr_strings.xml
index d640cb0b..a2dad23c 100644
--- a/res/values/cr_strings.xml
+++ b/res/values/cr_strings.xml
@@ -378,11 +378,11 @@
 
     <!-- Power menu on secure lockscreen -->
     <string name="lockscreen_enable_power_menu_title">Power menu</string>
-    <string name="lockscreen_enable_power_menu_summary">Allow accessing power menu on secure lock screen</string>
+    <string name="lockscreen_enable_power_menu_summary">Allow accessing power menu on secure lockscreen</string>
 
     <!-- Quick settings on secure lockscreen -->
     <string name="lockscreen_enable_qs_title">Quick settings</string>
-    <string name="lockscreen_enable_qs_summary">Allow accessing quick settings and swipe shortcuts on secure lock screen</string>
+    <string name="lockscreen_enable_qs_summary">Allow accessing quick settings on secure lockscreen</string>
 
     <!-- Screenshot Sound  -->
     <string name="screenshot_sound_title">Screenshot sound</string>
diff --git a/res/xml/crdroid_settings_lockscreen.xml b/res/xml/crdroid_settings_lockscreen.xml
index cb58d221..3ca27b90 100644
--- a/res/xml/crdroid_settings_lockscreen.xml
+++ b/res/xml/crdroid_settings_lockscreen.xml
@@ -301,11 +301,11 @@
                android:summary="@string/lockscreen_enable_power_menu_summary"
                android:defaultValue="true" />
 
-        <!--<com.crdroid.settings.preferences.GlobalSettingSwitchPreference
+        <com.crdroid.settings.preferences.GlobalSettingSwitchPreference
                android:key="lockscreen_enable_qs"
                android:icon="@drawable/ic_settings_quicksettings"
                android:title="@string/lockscreen_enable_qs_title"
                android:summary="@string/lockscreen_enable_qs_summary"
-               android:defaultValue="true" />-->
+               android:defaultValue="true" />
     </PreferenceCategory>
 </PreferenceScreen>
diff --git a/src/com/crdroid/settings/fragments/LockScreen.java b/src/com/crdroid/settings/fragments/LockScreen.java
index 7c38aa46..21ea5492 100644
--- a/src/com/crdroid/settings/fragments/LockScreen.java
+++ b/src/com/crdroid/settings/fragments/LockScreen.java
@@ -113,6 +113,8 @@ public class LockScreen extends SettingsPreferenceFragment
                 LineageSettings.Secure.LOCKSCREEN_MEDIA_METADATA, 1, UserHandle.USER_CURRENT);
         Settings.Global.putInt(resolver,
                 Settings.Global.LOCKSCREEN_ENABLE_POWER_MENU, 1);
+        Settings.Global.putInt(resolver,
+                Settings.Global.LOCKSCREEN_ENABLE_QS, 1);
         Settings.Secure.putIntForUser(resolver,
                 Settings.Secure.LOCKSCREEN_ALBUMART_FILTER, 0, UserHandle.USER_CURRENT);
         Settings.System.putIntForUser(resolver,
-- 
2.17.1

