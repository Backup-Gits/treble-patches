From 019f3da17e06722ee8434627ab992324df0a8d9f Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Thu, 26 Mar 2020 18:47:10 +0200
Subject: [PATCH 025/115] Revert "FODCircleView: Patch partial wakelock issues"

This reverts commit 83c5c602c95bf081eb128f68a197e9c728caed64.
---
 .../com/android/systemui/biometrics/FODCircleView.java   | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/packages/SystemUI/src/com/android/systemui/biometrics/FODCircleView.java b/packages/SystemUI/src/com/android/systemui/biometrics/FODCircleView.java
index 01e0a87002b..0f2a25cf3bb 100644
--- a/packages/SystemUI/src/com/android/systemui/biometrics/FODCircleView.java
+++ b/packages/SystemUI/src/com/android/systemui/biometrics/FODCircleView.java
@@ -104,8 +104,14 @@ public class FODCircleView extends ImageView {
             if (dreaming) {
                 mBurnInProtectionTimer = new Timer();
                 mBurnInProtectionTimer.schedule(new BurnInProtectionTask(), 0, 60 * 1000);
+                if (!mWakeLock.isHeld()) {
+                    mWakeLock.acquire();
+                }
             } else if (mBurnInProtectionTimer != null) {
                 mBurnInProtectionTimer.cancel();
+                if (mWakeLock.isHeld()) {
+                    mWakeLock.release();
+                }
             }
         }
 
@@ -343,9 +349,6 @@ public class FODCircleView extends ImageView {
 
     private void updateAlpha() {
         if (mIsCircleShowing) {
-            if (mIsDreaming) {
-                mWakeLock.acquire(300);
-            }
             setAlpha(1.0f);
         } else {
             setAlpha(mIsDreaming ? 0.5f : 1.0f);
-- 
2.20.1

