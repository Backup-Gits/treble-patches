From 21c5a3108284708680622253548fe8d3649c3af1 Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Thu, 9 Apr 2020 03:18:28 +0300
Subject: [PATCH 116/133] add Ubuntu font

---
 data/fonts/fonts.xml                          | 16 ++++++++++
 packages/overlays/Android.mk                  |  1 +
 .../overlays/FontUbuntuOverlay/Android.mk     | 31 +++++++++++++++++++
 .../FontUbuntuOverlay/AndroidManifest.xml     | 31 +++++++++++++++++++
 .../FontUbuntuOverlay/res/values/config.xml   | 27 ++++++++++++++++
 .../FontUbuntuOverlay/res/values/strings.xml  | 20 ++++++++++++
 6 files changed, 126 insertions(+)
 create mode 100644 packages/overlays/FontUbuntuOverlay/Android.mk
 create mode 100644 packages/overlays/FontUbuntuOverlay/AndroidManifest.xml
 create mode 100644 packages/overlays/FontUbuntuOverlay/res/values/config.xml
 create mode 100644 packages/overlays/FontUbuntuOverlay/res/values/strings.xml

diff --git a/data/fonts/fonts.xml b/data/fonts/fonts.xml
index b6227c8072b..8075564e6a8 100644
--- a/data/fonts/fonts.xml
+++ b/data/fonts/fonts.xml
@@ -182,6 +182,22 @@
     </family>
     <alias name="arsenal-bold" to="arsenal" weight="700" />
 
+    <family name="ubuntu">
+        <font weight="100" style="normal">Ubuntu-Light.ttf</font>
+        <font weight="100" style="italic">Ubuntu-LightItalic.ttf</font>
+        <font weight="300" style="normal">Ubuntu-Light.ttf</font>
+        <font weight="300" style="italic">Ubuntu-LightItalic.ttf</font>
+        <font weight="400" style="normal">Ubuntu-Regular.ttf</font>
+        <font weight="400" style="italic">Ubuntu-Italic.ttf</font>
+        <font weight="500" style="normal">Ubuntu-Medium.ttf</font>
+        <font weight="500" style="italic">Ubuntu-MediumItalic.ttf</font>
+        <font weight="700" style="normal">Ubuntu-Medium.ttf</font>
+        <font weight="700" style="italic">Ubuntu-MediumItalic.ttf</font>
+        <font weight="900" style="normal">Ubuntu-Bold.ttf</font>
+        <font weight="900" style="italic">Ubuntu-BoldItalic.ttf</font>
+    </family>
+    <alias name="ubuntu-bold" to="ubuntu" weight="700" />
+
     <!-- fallback fonts -->
     <family lang="und-Arab" variant="elegant">
         <font weight="400" style="normal">NotoNaskhArabic-Regular.ttf</font>
diff --git a/packages/overlays/Android.mk b/packages/overlays/Android.mk
index b4dad1e4658..9fa8910f857 100644
--- a/packages/overlays/Android.mk
+++ b/packages/overlays/Android.mk
@@ -38,6 +38,7 @@ LOCAL_REQUIRED_MODULES := \
 	FontRubikOverlay \
 	FontSimpleDayOverlay \
 	FontSourceOverlay \
+	FontUbuntuOverlay \
 	FontZillaOverlay \
 	IconPackCircularAndroidOverlay \
 	IconPackCircularLauncherOverlay \
diff --git a/packages/overlays/FontUbuntuOverlay/Android.mk b/packages/overlays/FontUbuntuOverlay/Android.mk
new file mode 100644
index 00000000000..4bdad0bf2e9
--- /dev/null
+++ b/packages/overlays/FontUbuntuOverlay/Android.mk
@@ -0,0 +1,31 @@
+#
+#  Copyright 2019, The Android Open Source Project
+#
+# Licensed under the Apache License, Version 2.0 (the "License");
+# you may not use this file except in compliance with the License.
+# You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+#
+
+LOCAL_PATH:= $(call my-dir)
+include $(CLEAR_VARS)
+
+LOCAL_RRO_THEME := FontUbuntu
+
+LOCAL_PRODUCT_MODULE := true
+
+LOCAL_SRC_FILES := $(call all-subdir-java-files)
+
+LOCAL_RESOURCE_DIR := $(LOCAL_PATH)/res
+
+LOCAL_PACKAGE_NAME := FontUbuntuOverlay
+LOCAL_SDK_VERSION := current
+
+include $(BUILD_RRO_PACKAGE)
diff --git a/packages/overlays/FontUbuntuOverlay/AndroidManifest.xml b/packages/overlays/FontUbuntuOverlay/AndroidManifest.xml
new file mode 100644
index 00000000000..791486d2baf
--- /dev/null
+++ b/packages/overlays/FontUbuntuOverlay/AndroidManifest.xml
@@ -0,0 +1,31 @@
+<!--
+/**
+ * Copyright (c) 2019, The Android Open Source Project
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+-->
+<manifest xmlns:android="http://schemas.android.com/apk/res/android"
+    package="com.android.theme.font.ubuntu"
+    android:versionCode="1"
+    android:versionName="1.0">
+    <overlay android:targetPackage="android"
+        android:category="android.theme.customization.font"
+        android:priority="1"/>
+
+    <application android:label="@string/font_ubuntu_overlay" android:hasCode="false">
+        <meta-data
+            android:name="android.theme.customization.REQUIRED_SYSTEM_FONTS"
+            android:value="ubuntu,ubuntu-bold" />
+    </application>
+</manifest>
diff --git a/packages/overlays/FontUbuntuOverlay/res/values/config.xml b/packages/overlays/FontUbuntuOverlay/res/values/config.xml
new file mode 100644
index 00000000000..a566cd2aaee
--- /dev/null
+++ b/packages/overlays/FontUbuntuOverlay/res/values/config.xml
@@ -0,0 +1,27 @@
+<!--
+/**
+ * Copyright (c) 2019, The Android Open Source Project
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+-->
+<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
+     <!-- Name of a font family to use for body text. -->
+    <string name="config_bodyFontFamily" translatable="false">ubuntu</string>
+    <!-- Name of a font family to use for medium body text. -->
+    <string name="config_bodyFontFamilyMedium" translatable="false">ubuntu-bold</string>
+    <!-- Name of a font family to use for headlines. If empty, falls back to platform default -->
+    <string name="config_headlineFontFamily" translatable="false">ubuntu</string>
+    <!-- Name of the font family used for system surfaces where the font should use medium weight -->
+    <string name="config_headlineFontFamilyMedium" translatable="false">ubuntu-bold</string>
+</resources>
diff --git a/packages/overlays/FontUbuntuOverlay/res/values/strings.xml b/packages/overlays/FontUbuntuOverlay/res/values/strings.xml
new file mode 100644
index 00000000000..936f4f684ee
--- /dev/null
+++ b/packages/overlays/FontUbuntuOverlay/res/values/strings.xml
@@ -0,0 +1,20 @@
+<!--
+/**
+ * Copyright (c) 2019, The Android Open Source Project
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+-->
+<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
+    <string name="font_ubuntu_overlay" translatable="false">Ubuntu</string>
+</resources>
-- 
2.17.1

