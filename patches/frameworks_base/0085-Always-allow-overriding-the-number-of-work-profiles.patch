From 8b4abc882393b8c9fb801fe94021fb7857d4def7 Mon Sep 17 00:00:00 2001
From: Pierre-Hugues Husson <phh@phh.me>
Date: Sun, 5 Apr 2020 16:32:46 +0200
Subject: [PATCH 085/115] Always allow overriding the number of work profiles

---
 .../java/com/android/server/pm/UserManagerService.java | 10 ++--------
 1 file changed, 2 insertions(+), 8 deletions(-)

diff --git a/services/core/java/com/android/server/pm/UserManagerService.java b/services/core/java/com/android/server/pm/UserManagerService.java
index 6fcb4b6e47f..89877e29a87 100644
--- a/services/core/java/com/android/server/pm/UserManagerService.java
+++ b/services/core/java/com/android/server/pm/UserManagerService.java
@@ -4429,14 +4429,8 @@ public class UserManagerService extends IUserManager.Stub {
 
     @VisibleForTesting
     static int getMaxManagedProfiles() {
-        // Allow overriding max managed profiles on debuggable builds for testing
-        // of multiple profiles.
-        if (!Build.IS_DEBUGGABLE) {
-            return MAX_MANAGED_PROFILES;
-        } else {
-            return SystemProperties.getInt("persist.sys.max_profiles",
-                    MAX_MANAGED_PROFILES);
-        }
+	return SystemProperties.getInt("persist.sys.max_profiles",
+            MAX_MANAGED_PROFILES);
     }
 
     @GuardedBy("mUsersLock")
-- 
2.20.1

